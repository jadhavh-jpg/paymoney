<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Loading...</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family:system-ui;text-align:center;margin-top:40px">

Loading payment page...

<script>
(async () => {
  const params = new URLSearchParams(location.search);
  const id = params.get("id");

  if (!id) {
    document.body.innerHTML = "Invalid link";
    return;
  }

  const res = await fetch("/data/links.json");
  const data = await res.json();

  if (!data[id]) {
    document.body.innerHTML = "Link expired or not found";
    return;
  }

  const d = data[id];

  const url =
    "/landing.html" +
    "?title=" + encodeURIComponent(d.title) +
    "&subtitle=" + encodeURIComponent(d.subtitle || "") +
    "&desc=" + encodeURIComponent(d.desc || "") +
    "&date=" + (d.date || "") +
    "&time=" + (d.time || "") +
    "&mode=" + (d.mode || "") +
    "&amount=" + d.amount +
    "&upi=" + encodeURIComponent(d.upi) +
    "&img=" + encodeURIComponent(d.img || "") +
    (d.group ? "&group=" + encodeURIComponent(d.group) : "");

  location.replace(url);
})();
</script>

</body>
</html>
