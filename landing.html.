<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayMoney</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#f1f5f9;
  font-family:system-ui;
}
.card{
  max-width:420px;
  margin:30px auto;
  background:#fff;
  border-radius:24px;
  padding:20px;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
  text-align:center;
}
img{
  width:100%;
  border-radius:18px;
}
h1{
  font-size:28px;
  font-weight:900;
  margin:10px 0;
}
h2{
  margin:6px 0;
}
p{
  color:#475569;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:999px;
  font-weight:700;
  margin-top:10px;
  cursor:pointer;
}
.green{background:#22c55e;color:#fff}
.dark{background:#020617;color:#fff}
</style>
</head>

<body>

<div class="card" id="app">
  <img id="img">
  <h1 id="brand"></h1>
  <h2 id="title"></h2>
  <p id="desc"></p>
  <p id="dt"></p>
  <p id="mode"></p>

  <button class="green" onclick="openUPI()">ðŸ“± Open UPI App</button>
  <button class="dark" onclick="showQR()">ðŸ’» Scan QR</button>
  <button class="green" onclick="shareWA()">ðŸ“¤ Share on WhatsApp</button>
</div>

<script>
const params = new URLSearchParams(window.location.search);

const data = {
  brand: params.get("brand"),
  title: params.get("title"),
  desc: params.get("desc"),
  img: params.get("img"),
  dt: params.get("dt"),
  mode: params.get("mode"),
  upi: params.get("upi"),
  amt: params.get("amt")
};

if(!data.title || !data.img || !data.upi || !data.amt){
  document.getElementById("app").innerHTML = "<h2>Invalid or incomplete payment link</h2>";
}else{
  document.getElementById("brand").innerText = data.brand || "";
  document.getElementById("title").innerText = data.title;
  document.getElementById("desc").innerText = data.desc || "";
  document.getElementById("img").src = data.img;
  document.getElementById("mode").innerText = "Mode: " + (data.mode || "");

  const d = new Date(data.dt);
  document.getElementById("dt").innerText = isNaN(d)
    ? ""
    : "ðŸ“… " + d.toLocaleString();
}

function openUPI(){
  location.href = `upi://pay?pa=${data.upi}&am=${data.amt}&cu=INR`;
}

function showQR(){
  const qrUrl =
    `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=` +
    encodeURIComponent(`upi://pay?pa=${data.upi}&am=${data.amt}&cu=INR`);
  window.open(qrUrl, "_blank");
}

function shareWA(){
  window.open(
    "https://wa.me/?text=" + encodeURIComponent(window.location.href),
    "_blank"
  );
}
</script>

</body>
</html>
