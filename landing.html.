<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayMoney</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;background:#f3f4f6;font-family:system-ui}
.card{max-width:420px;margin:20px auto;background:#fff;border-radius:26px;box-shadow:0 20px 40px rgba(0,0,0,.2);overflow:hidden}
img{width:100%}
.c{padding:18px;text-align:center}
h1{margin:6px 0;font-size:26px}
h2{margin:4px 0;font-size:20px}
p{color:#475569}
button{width:100%;padding:14px;margin-top:10px;border:none;border-radius:999px;font-weight:700}
.upi{background:#22c55e;color:#fff}
.qr{background:#020617;color:#fff}
.share{background:#16a34a;color:#fff}
</style>
</head>

<body>
<div class="card">
<img id="img">
<div class="c">
<h1 id="brand"></h1>
<h2 id="title"></h2>
<p id="desc"></p>

<p id="dt"></p>
<p id="mode"></p>

<button class="upi" onclick="openUPI()">üì± Open UPI App</button>
<button class="qr" onclick="showQR()">üíª Scan QR</button>
<button class="share" onclick="shareWA()">üì§ Share on WhatsApp</button>

<div id="qrbox"></div>
</div>
</div>

<script>
const q=new URLSearchParams(location.search);
const d=JSON.parse(localStorage.getItem("pm_"+q.get("id")));
if(!d) document.body.innerHTML="<h2>Invalid Link</h2>";

img.src=d.image;
brand.innerText=d.brand;
title.innerText=d.title;
desc.innerText=d.desc;
dt.innerText=`üìÖ ${d.date} ‚è∞ ${d.time}`;
mode.innerText=`Mode: ${d.mode}`;

function openUPI(){
  location.href=`upi://pay?pa=${d.upi}&pn=${encodeURIComponent(d.brand)}&am=${d.amount}&cu=INR`;
}

function showQR(){
  qrbox.innerHTML=`<img src="https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=upi://pay?pa=${d.upi}&am=${d.amount}">`;
}

function shareWA(){
  const link=location.href;
  location.href=`https://wa.me/?text=${encodeURIComponent(link)}`;
}
</script>
</body>
</html>
