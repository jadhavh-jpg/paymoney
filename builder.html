<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayMoney – Create Payment Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;background:#f1f5f9;font-family:system-ui}
.wrap{max-width:420px;margin:20px auto;background:#fff;padding:20px;border-radius:16px}
h2{text-align:center;margin:0 0 12px}
input,textarea,button{
  width:100%;padding:12px;margin:8px 0;border-radius:10px;border:1px solid #cbd5e1;font-size:15px
}
button{background:#0f172a;color:#fff;font-weight:700;border:none;cursor:pointer}
.preview img{width:100%;border-radius:12px;margin-top:10px}
</style>
</head>

<body>
<div class="wrap">
  <h2>Create Payment Page</h2>

  <input type="file" id="poster" accept="image/*">
  <input id="title" placeholder="Title">
  <textarea id="desc" placeholder="Description"></textarea>
  <input id="upi" placeholder="UPI ID">
  <input id="amount" type="number" placeholder="Amount (INR)">

  <button onclick="generate()">Generate Page</button>

  <div class="preview" id="preview"></div>
</div>

<script>
const CLOUD = "ddusj34vn";
const PRESET = "paymoney_unsigned";

async function uploadImage(file){
  const fd = new FormData();
  fd.append("file", file);
  fd.append("upload_preset", PRESET);

  const res = await fetch(
    `https://api.cloudinary.com/v1_1/${CLOUD}/image/upload`,
    { method:"POST", body:fd }
  );
  const data = await res.json();
  return data.secure_url;
}

async function generate(){
  const poster = document.getElementById("poster").files[0];
  const title = title.value.trim();
  const desc = desc.value.trim();
  const upi = upi.value.trim();
  const amount = amount.value.trim();

  if(!poster || !upi || !amount){
    alert("Poster + UPI + Amount required");
    return;
  }

  const img = await uploadImage(poster);

  document.getElementById("preview").innerHTML = `
    <img src="${img}">
    <h3>${title}</h3>
    <p>${desc}</p>
    <p><b>₹${amount}</b></p>
  `;
}
</script>
</body>
</html>
