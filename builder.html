<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayMoney â€“ Create Payment Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;background:#f3f4f6;font-family:system-ui}
.wrap{max-width:980px;margin:20px auto;display:grid;grid-template-columns:1fr 1fr;gap:20px}
.card{background:#fff;border-radius:18px;padding:20px;box-shadow:0 20px 40px rgba(0,0,0,.12)}
h2{margin:0 0 12px}
input,textarea,select{width:100%;padding:12px;margin:8px 0;border-radius:10px;border:1px solid #d1d5db}
button{width:100%;padding:14px;border:none;border-radius:999px;font-weight:700;cursor:pointer}
.primary{background:#020617;color:#fff}
.preview{display:flex;justify-content:center}
.phone{width:320px;border-radius:26px;box-shadow:0 20px 50px rgba(0,0,0,.25);overflow:hidden;background:#fff}
.phone img{width:100%}
.phone .p{padding:16px;text-align:center}
.phone h3{margin:10px 0 6px}
.btn{margin-top:10px;background:#22c55e;color:#fff}
</style>
</head>

<body>
<div class="wrap">

<!-- BUILDER -->
<div class="card">
<h2>Create Payment Page</h2>

<input type="file" id="img" accept="image/*" required>
<input id="brand" placeholder="Brand Name (eg. PayMoney)">
<input id="title" placeholder="Title">
<textarea id="desc" placeholder="Description"></textarea>

<input id="date" type="date">
<input id="time" type="time">

<select id="mode">
  <option>Online</option>
  <option>Offline</option>
</select>

<input id="upi" placeholder="UPI ID">
<input id="amount" placeholder="Amount (â‚¹)" type="number">

<button class="primary" onclick="generate()">Generate Page</button>
</div>

<!-- LIVE PREVIEW -->
<div class="card preview">
<div class="phone">
<img id="pimg" src="https://via.placeholder.com/400x300?text=Poster">
<div class="p">
<strong id="pbrand"></strong>
<h3 id="ptitle">Title</h3>
<p id="pdesc">Description</p>
<button class="btn">Register Now</button>
</div>
</div>
</div>

</div>

<script>
/* ðŸ”‘ Cloudinary config (replace with YOUR details) */
const CLOUD = {
  cloudName: "YOUR_CLOUD_NAME",
  uploadPreset: "paymoney_unsigned"
};

img.onchange = e=>{
  const f=e.target.files[0];
  if(f) pimg.src=URL.createObjectURL(f);
};

["brand","title","desc"].forEach(id=>{
  document.getElementById(id).oninput=()=>{
    pbrand.innerText=brand.value;
    ptitle.innerText=title.value||"Title";
    pdesc.innerText=desc.value||"Description";
  }
});

async function uploadImage(file){
  const fd=new FormData();
  fd.append("file",file);
  fd.append("upload_preset",CLOUD.uploadPreset);
  const r=await fetch(`https://api.cloudinary.com/v1_1/${CLOUD.cloudName}/image/upload`,{method:"POST",body:fd});
  return (await r.json()).secure_url;
}

async function generate(){
  if(!img.files[0]) return alert("Image required");

  const imageUrl = await uploadImage(img.files[0]);
  const id = Date.now();

  const data={
    brand:brand.value,
    title:title.value,
    desc:desc.value,
    date:date.value,
    time:time.value,
    mode:mode.value,
    upi:upi.value,
    amount:amount.value,
    image:imageUrl
  };

  localStorage.setItem("pm_"+id,JSON.stringify(data));
  window.location.href=`landing.html?id=${id}`;
}
</script>
</body>
</html>
