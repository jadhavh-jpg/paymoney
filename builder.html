<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayMoney Builder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<style>
body{margin:0;font-family:system-ui;background:#f1f5f9}
.wrap{max-width:420px;margin:30px auto;padding:16px}
.card{background:#fff;border-radius:20px;padding:18px;box-shadow:0 20px 40px rgba(0,0,0,.15)}
h2{text-align:center;margin:0 0 12px}
input,textarea{
  width:100%;padding:12px;margin-top:10px;
  border-radius:10px;border:1px solid #cbd5e1
}
textarea{min-height:80px}
button{
  width:100%;padding:14px;margin-top:12px;
  border:none;border-radius:14px;
  font-size:16px;font-weight:700;cursor:pointer
}
.primary{background:#2563eb;color:#fff}
.copy{background:#0f172a;color:#fff}
.wa{background:#22c55e;color:#fff}
.note{font-size:13px;color:#64748b;text-align:center;margin-top:10px}
</style>
</head>

<body>

<div class="wrap">
  <div class="card">
    <h2>Create Payment Page</h2>

    <input id="title" placeholder="Title (Yoga Class)">
    <textarea id="desc" placeholder="Description"></textarea>
    <input id="upi" placeholder="UPI ID (jadhav.h3@ybl)">
    <input id="amount" type="number" placeholder="Amount (INR)">

    <input type="file" accept="image/*" onchange="uploadImage(event)">

    <button class="primary" onclick="generate()">Generate Landing</button>

    <input id="linkBox" readonly style="display:none">

    <button class="copy" style="display:none" onclick="copyLink()">ðŸ“‹ Copy Link</button>
    <button class="wa" style="display:none" onclick="shareWA()">ðŸ“¤ Share WhatsApp</button>

    <div class="note">Image Firebase me upload hogi (all devices safe)</div>
  </div>
</div>

<script>
/* ðŸ”¥ FIREBASE CONFIG (APNA DALO) */
firebase.initializeApp({
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_PROJECT.appspot.com"
});
const storage = firebase.storage();

let posterURL="";

/* IMAGE UPLOAD */
function uploadImage(e){
  const file=e.target.files[0];
  if(!file) return;
  const ref=storage.ref("posters/"+Date.now()+"_"+file.name);
  ref.put(file).then(()=>ref.getDownloadURL().then(url=>{
    posterURL=url;
    alert("Image uploaded âœ”");
  }));
}

/* GENERATE LINK */
function generate(){
  if(!posterURL||!upi.value||!amount.value){
    alert("Image, UPI & Amount required");
    return;
  }
  const id=Date.now();
  localStorage.setItem("pm_"+id,JSON.stringify({
    title:title.value,
    desc:desc.value,
    poster:posterURL,
    upi:upi.value,
    amount:amount.value
  }));
  const link=location.origin+"/landing.html?id="+id;
  linkBox.value=link;
  linkBox.style.display="block";
  document.querySelector(".copy").style.display="block";
  document.querySelector(".wa").style.display="block";
}
function copyLink(){navigator.clipboard.writeText(linkBox.value)}
function shareWA(){window.open("https://wa.me/?text="+encodeURIComponent(linkBox.value))}
</script>

</body>
</html>
