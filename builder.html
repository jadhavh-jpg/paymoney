<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayMoney â€“ Create Payment Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#f1f5f9;
}
.container{
  max-width:1100px;
  margin:30px auto;
  padding:16px;
  display:flex;
  gap:24px;
}
@media(max-width:900px){
  .container{flex-direction:column}
}
.card{
  background:#fff;
  border-radius:18px;
  padding:22px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
  width:50%;
}
@media(max-width:900px){.card{width:100%}}

h2{margin-top:0}

input,textarea{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #cbd5e1;
  margin:8px 0 14px;
  font-size:15px;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:999px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}
.primary{background:#0f172a;color:#fff}
.wa{background:#22c55e;color:#fff;margin-top:10px}

.preview{
  text-align:center;
}
.phone{
  max-width:360px;
  margin:auto;
  border-radius:24px;
  background:#fff;
  box-shadow:0 15px 40px rgba(0,0,0,.15);
  padding:18px;
}
.phone img{
  width:100%;
  border-radius:16px;
}
.phone h3{margin:12px 0 6px}
.phone p{font-size:14px;color:#475569}
.reg{
  background:#22c55e;
  color:#fff;
  padding:12px;
  border-radius:999px;
  margin-top:12px;
  font-weight:700;
}
</style>
</head>

<body>

<div class="container">

<!-- BUILDER -->
<div class="card">
<h2>Create Payment Page</h2>

<label>Poster Image *</label>
<input type="file" id="image">

<label>Title</label>
<input id="title" placeholder="3-Day Yoga Class">

<label>Description</label>
<textarea id="desc"></textarea>

<label>UPI ID *</label>
<input id="upi" placeholder="name@bank">

<label>Amount (â‚¹) *</label>
<input id="amount" type="number">

<button class="primary" onclick="generate()">Generate Page</button>
</div>

<!-- LIVE PREVIEW -->
<div class="card preview">
<h2>Live Preview</h2>
<div class="phone">
  <img id="pImg" src="https://via.placeholder.com/400x500">
  <h3 id="pTitle">Title</h3>
  <p id="pDesc">Description</p>
  <div class="reg">Register Now</div>
</div>
</div>

</div>

<script>
const CLOUD_NAME = "ddusj34vn";     // âœ… tumhara
const UPLOAD_PRESET = "paymoney_unsigned"; // âœ… tumhara

let imageURL = "";

image.onchange = async e=>{
  const file = e.target.files[0];
  const fd = new FormData();
  fd.append("file", file);
  fd.append("upload_preset", UPLOAD_PRESET);

  const r = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,{
    method:"POST",
    body:fd
  });
  const data = await r.json();
  imageURL = data.secure_url;
  pImg.src = imageURL;
};

title.oninput = ()=>pTitle.innerText = title.value;
desc.oninput  = ()=>pDesc.innerText  = desc.value;

function generate(){
  if(!imageURL || !upi.value || !amount.value){
    alert("Image, UPI & Amount required");
    return;
  }

  const payload = {
    img:imageURL,
    title:title.value,
    desc:desc.value,
    upi:upi.value,
    amt:amount.value
  };

  const id = Date.now();
  sessionStorage.setItem("pm_"+id, JSON.stringify(payload));

  // ðŸ”¥ user ko URL dikhaye bina open
  window.open("landing.html?id="+id,"_blank");
}
</script>

</body>
</html>
